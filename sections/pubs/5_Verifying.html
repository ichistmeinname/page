---
title: Verifying Effectful Haskell Programs in Coq
urlPaper: https://www-ps.informatik.uni-kiel.de/~sad/haskell2019-preprint.pdf
authors: Jan Christiansen, and Niels Bunkenburg
conference: Haskell Symposium 2019
urlConf: https://icfp19.sigplan.org/home/haskellsymp-2019#event-overview
accept: 13/25
label: Verifying
---

<div class="expand abstract" id="abstractExpand" >
  </br>
  <b>Abstract
  <pre>
  We show how various Haskell language features that are related to
  ambient effects can be modeled in Coq. For this purpose we build on
  previous work that demonstrates how to reason about existing Haskell
  programs by translating them into monadic Coq programs. A model of
  Haskell programs in Coq that is polymorphic over an arbitrary monad
  results in non-strictly positive types when transforming recursive
  data types likes lists. Such non-strictly positive types are not
  accepted by Coqâ€™s termination checker. Therefore, instead of a model
  that is generic over any monad, the approach we build on uses a
  specific monad instance, namely the free monad in combination with
  containers, to model various kinds of effects. This model allows
  effect-generic proofs.
  </br>
  In this paper we consider ambient effects that may occur in Haskell,
  namely partiality, errors, and tracing, in detail. We observe that,
  while proving propositions that hold for all kinds of effects is
  attractive, not all propositions of interest hold for all kinds of
  effects. Some propositions fail for certain effects because the
  usual monadic translation models call-by-name and not call-by-need. Since
  modeling the evaluation semantics of call-by-need in the presence
  of effects like partiality is complex and not necessary to prove
  propositions for a variety of effects, we identify a specific class
  of effects for which we cannot observe a difference between
  call-by-name and call-by-need. Using this class of effects we can
  prove propositions for all effects that do not require a model of
  sharing.
  </pre>
  </div>

<div class="expand bib" id="bibExpand">
  <pre>
    <code>
    @inproceedings{christiansen2019verifying
    author    = {Christiansen, Jan and Dylus, Sandra and Bunkenburg, Niels},
    title     = {Verifying Effectful Haskell Programs in Coq},
    booktitle = {Proceedings of the 12th International Symposium on Haskell},
    series    = {ICFP 2019},
    year      = {2019},
    location  = {Berlin, Germany},
    publisher = {ACM},
    address   = {New York, NY, USA},
    }
